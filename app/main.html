<!doctype html>
<html>

<head>
  <title>Basic3D</title>
</head>

<body>
  <div id="container"></div>
  <script src="scripts/three.min.js"></script>

  <script>
    var Basic3D = (function () {

      var modules = {};

      return {
        loadModule: function (name, loader) {
          var args = loader.toString().match(/function\s.*?\(([^)]*)\)/)[1];
          var dependencies = args.split(',').map(function (arg) {
            return arg.replace(/\/\*.*\*\//, '').trim();
          }).filter(function (arg) {
            return arg;
          });
          var missing = dependencies.filter(function (dep) {
            return modules[dep] === undefined;
          });
          if (missing.length > 0) {
            console.log("ERROR: Module '" + name + "' missing dependencies.");
          } else {
            var params = dependencies.map(function (dep) {
              return modules[dep];
            });
            modules[name] = loader.apply(null, params);
          }
        }
      };
      
    })();
  </script>

  <script src="scripts/InputHandling.js"></script>
  <script src="scripts/Scene.js"></script>
  <script src="scripts/CameraControls.js"></script>
  <script src="scripts/Overlay.js"></script>
  <script src="scripts/Colors.js"></script>
  <script src="scripts/Geometry.js"></script>
  <script src="scripts/History.js"></script>
  <script src="scripts/GeometryCreation.js"></script>
  <script src="scripts/GeometrySelection.js"></script>
  <script src="scripts/GeometryTranslation.js"></script>

  <script>
    Basic3D.loadModule("Start", function (InputHandling) {

      // Begin update loop
      function update() {
        InputHandling.update();
        requestAnimationFrame(update);
      }
      requestAnimationFrame(update);

      return {};

    });
  </script>

</body>

</html>